<!DOCTYPE html>
<html>
<head>
	<title>@ViewBag.Title</title>
	<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
	@{ Html.Register().JQuery(); }
</head>
<body>
	@{ Html.RenderControlPanel(); }
	<div class="page">
		<div id="header">
			<div id="title">
				<h1>
					My MVC Application</h1>
			</div>
			<div id="logindisplay">
				@Html.Partial("_LogOnPartial")
			</div>
			<div id="menucontainer">
				<ul id="menu" class="menu">
					<li>@Content.LinkTo(Content.StartPage).Class(Content.Current == Content.StartPage ? "current" : "")</li>@Content.TreeFrom(depth: 2, excludeRoot: true)
				</ul>
				@foreach (var a in Content.AncestorsBetween(1, 5))
				{
				if(Content.Children(a).Any())
				{
				<ul class="submenu menu">
					@foreach (var c in Content.Children(a)){<li>@Content.LinkTo(c).Class(Content.GetNavigationClass(c))</li>}
				</ul>
				}
				}
			</div>
		</div>
		<div id="main">
			@if (IsSectionDefined("Main")) { RenderSection("Main"); }
			else
			{
			<div id="sidebar">@if (IsSectionDefined("Sidebar")) { RenderSection("Sidebar"); } else { Html.DroppableZone("Sidebar").Render(); }</div>
			<div id="content">@RenderBody()</div>
			}
			<div id="footer"></div>
		</div>
	</div>
</body>
</html>
